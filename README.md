# ChatGPT Telegram Bot

ChatGPT Telegram Bot – це бот для Telegram, який інтегрується з ChatGPT через OpenAI API. Він дозволяє користувачам:

- Отримувати випадкові цікаві факти.
- Спілкуватися з GPT-моделлю.
- Проводити діалог із "відомими особистостями".
- Брати участь у квізах із генерованими питаннями.
- Перекладати будь-який текст на англійську / українську / чеську / іспанську / французьку мови. 

Бот використовує сучасний підхід до організації діалогу за допомогою `ConversationHandler` з бібліотеки [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot) та містить чітко розділену логіку для кожного режиму роботи.
Також до проєкту додано розширене логування для спрощення відлагодження та моніторингу роботи бота.

---

## Функціональність

- **Головне меню:**  
  Користувач може обирати один із режимів роботи:
  - **Випадковий факт:** Бот генерує та надсилає цікавий факт.
  - **GPT-чат:** Діалог із GPT-моделлю, де користувач може ставити запитання.
  - **Діалог з відомою особистістю:** Користувач обирає "особистість" (наприклад, Курт Кобейн або Стівен Хокінг) та спілкується з нею.
  - **Квіз:** Бот генерує питання за обраною темою, а користувач відповідає на них.
  - **Перекладач:** Бот перекладає наданий користувачем текст на обрану цільову мову з наявного списку. GPT відповідає лише перекладеним текстом без додаткових коментарів.

- **Обробка діалогу:**  
  Використовується `ConversationHandler` для керування станами діалогу, що робить логіку переходів між режимами зрозумілою та легкою для розширення.

- **Інтеграція з ChatGPT:**  
  Запити до моделі GPT виконуються за допомогою OpenAI API через модуль `gpt.py`. Бот надсилає як системні повідомлення (prompt), так і запити користувача до моделі.

- **Логування:**  
  Для відлагодження та моніторингу роботи бота використовується стандартний модуль `logging`. 
  У всіх основних модулях (bot.py, util.py, gpt.py, credentials.py) додано логування основних подій, помилок та відлагоджувальних повідомлень.

- **Кастомізація повідомлень:**  
  Повідомлення, зображення та prompt-и завантажуються з файлів, що дозволяє легко змінювати контент без модифікації коду.

---

## Використані технології

- **Python 3.8+** – основна мова програмування.
- **python-telegram-bot** – бібліотека для створення Telegram-ботів з підтримкою ConversationHandler.
- **OpenAI API** – інтеграція з ChatGPT.
- **httpx** – HTTP-клієнт для запитів до OpenAI.
- **python-dotenv** – завантаження змінних середовища з файлу .env.
- **logging** – стандартний модуль для логування подій, помилок та відлагодження.

---

## Встановлення та налаштування

### Вимоги

- **Python 3.8+**
- Необхідні бібліотеки:
  - `python-telegram-bot`
  - `openai`
  - `httpx`
  - `python-dotenv`

### Інструкції з встановлення

1. **Клонування репозиторію:**

   ```bash
   git clone https://github.com/PavNix/CHATGPT.git
   cd your_project
   ```

2. **Створення віртуального середовища та встановлення залежностей:**

- Якщо ви використовуєте pipenv:
   
   ```bash
   pipenv install
   pipenv shell
   ```
   
- Або через pip:

   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate     # Windows
   pip install -r requirements.txt
   ```
  
3. **Налаштування змінних середовища:**
- Створіть файл .env у корені проєкту та додайте наступні змінні:
   
   ```bash
   CHATGPT_TOKEN=your_chatgpt_api_token
   BOT_TOKEN=your_telegram_bot_token
   ```
  
4. **Запуск бота:**
   
   ```bash
   python bot.py
   ```
   

## Структура проєкту
   
   ```bash
   your_project/
   │
   ├── bot.py                 # Головний файл з логікою діалогу та обробниками
   ├── util.py                # Утиліти для надсилання повідомлень, завантаження контенту та управління діалогами
   ├── gpt.py                 # Модуль для інтеграції з OpenAI ChatGPT
   ├── credentials.py         # Завантаження та налаштування токенів з файлу .env
   ├── .env                   # Файл з конфіденційними змінними (не додається до репозиторію)
   ├── .gitignore             # Файл для ігнорування файлів у Git (наприклад, .env)
   ├── Pipfile / requirements.txt   # Файли для управління залежностями
   │
   └── resources/             # Ресурси проєкту
       ├── images/            # Зображення, що використовуються у боті
       ├── messages/          # Текстові файли (.txt) з повідомленнями для комунікації
       └── prompts/           # Файли (.txt) з prompt-ами для ChatGPT
   ```

  
## Налаштування ресурсів

- Images:
   Помістіть усі потрібні зображення у папку resources/images. Імена файлів повинні відповідати тим, що використовуються у коді (наприклад, main.jpg, gpt.jpg).

- Messages:
   Текстові файли з повідомленнями зберігаються у resources/messages. Ви можете змінювати контент без зміни коду.

- Prompts:
   Файли з prompt-ами для ChatGPT зберігаються у resources/prompts. Це дозволяє легко налаштовувати поведінку GPT.


## Внесення змін та розширення

Проєкт структуровано так, що ви легко можете:
  - Додавати нові режими роботи, використовуючи ConversationHandler.
  - Розширювати функціонал бота, змінюючи файли у папці resources без модифікації коду.
  - Налаштовувати поведінку ChatGPT через файл prompt-ів.
  - Використовувати логування для відслідковування подій, пошуку помилок та аналізу роботи бота.

## Контакти
Якщо у вас виникли запитання або ви хочете повідомити про помилки, звертайтесь за адресою: veronika@pavlichenko.me

